{% extends "base.html" %}

{% block title %}
Sydney Sabre Lessons 
{% endblock %}

{% block content %}
    <div class="container">
        <h1 class="text-gray-200 my-2 text-3xl font-bold">{{ self.title() }}</h1>
        {% for slot in all_slots%}
        <div class="flex mr-auto my-4 w-full md:w-3/4 lg:w-1/2">
            {% if current_user.is_admin: %}
                <div class="flex grow">
                    {% if slot.completed == True: %}
                    <a class="grow bg-gray-700 line-through text-white font-bold py-2 px-4 rounded"
                    {% elif slot.name == None: %}
                    <a class="grow bg-gray-800 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded"
                    {% elif slot.paid == True: %}
                    <a class="grow bg-green-800 hover:bg-green-400 text-white font-bold py-2 px-4 rounded"
                    {% else %}
                    <a class="grow bg-red-800 hover:bg-red-400 text-white font-bold py-2 px-4 rounded"
                    {% endif %}
                        href="{{ url_for('book_slot', slot_id=slot.id) }}">
                        {{ slot.date.strftime('%d %b %Y %a') }} at {{ slot.time.strftime('%H:%M') }} booked for {{ slot.name }}
                    </a>
                </div>
            <div class="flex">
                <a class="bg-red-400 hover:bg-red-200 text-white font-bold mx-2 px-3 py-2 rounded"   
                    href="{{url_for('delete_slot', slot_id=slot.id) }}">
                    ✘
                </a>
            </div>
            <div class="flex">
                <a class="bg-green-400 hover:bg-green-200 text-white font-bold mx-2 px-3 py-2 rounded"   
                    href="{{url_for('toggle_complete_slot', slot_id=slot.id) }}">
                    ✓
                </a>
            </div>
            {% else %}
                {% if slot.completed == True: %}
                <div class="flex grow">
                    <p class="grow bg-gray-700 text-white line-through font-bold py-2 px-4 rounded">
                        {{ slot.date.strftime('%d %b %Y %a') }} at {{ slot.time.strftime('%H:%M') }} is completed
                    </p>
                </div>
                {% elif slot.name == None: %}
                <div class="flex grow">
                    <a class="grow bg-gray-800 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded"
                        href="{{ url_for('book_slot', slot_id=slot.id) }}">
                        {{ slot.date.strftime('%d %b %Y %a') }} at {{ slot.time.strftime('%H:%M') }} is available.
                    </a>
                </div>
                {% elif slot.paid == True: %}
                <div class="flex grow">
                    <p class="grow bg-green-600 text-white font-bold py-2 px-4 rounded">
                        {{ slot.date.strftime('%d %b %Y %a') }} at {{ slot.time.strftime('%H:%M') }} is booked and paid.
                    </p>
                </div>
                {% else %}
                <div class="flex grow">
                    <p class="grow bg-red-800 text-white font-bold py-2 px-4 rounded">
                        {{ slot.date.strftime('%d %b %Y %a') }} at {{ slot.time.strftime('%H:%M') }} is already booked.
                    </p>
                </div>
                {% endif %}
            {% endif %}
        </div>
        {% endfor%}
        <div class="inline-flex">
            <a class="bg-gray-800 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded-l" href="{{url_for('show_date', date=prev_date)}}">
              Prev
            </a>
            <a class="bg-gray-800 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded-r" href="{{url_for('show_date', date=next_date)}}">
              Next
            </a>
          </div>
    </div>
{% endblock %}






  